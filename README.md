# Социальная сеть для путешественников - Системный дизайн
Выполняется в качестве домашнего задания на курсе https://platform-balun.ru/teach/control/stream/view/id/921829580

![img.png](img.png)

Социальная сеть для путешественников позволяет обмениваться информацией о посещенных местах
и выбирать новые локации для путешествий.

### Функциональные требования:
- Публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- Оценка и комментарии постов других путешественников;
- Подписка на других путешественников, чтобы следить за их активностью;
- Поиск популярных мест для путешествий и просмотр постов с этих мест;
- Просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;

### Нефункциональные требования:
- DAU 10000000 (daily active users)
- Аудитория стран СНГ
- Данные будут храниться всегда
- Активности пользователей:
  - в среднем каждый пользователь пишет 1 пост в неделю, ставит 50 реакций в сутки и пишет 20 комментариев в сутки
  - в среднем каждый пользователь 5 раз в сутки просматривает ленту новостей других путешественников (до 50 постов за 1 раз)
  - в среднем каждый пользователь находит 3 новых места для путешествия и просматривает до 10 постов с каждого места
  - в среднем каждый пользователь в просмотренном посте читает 5 комментариев и смотрит по 1 реакции на пост
  - в среднем каждый пользователь подписывается/отписывается на других пользователей 1 раз в сутки
- Лимиты:
  - 1 пост может содержать максимум 10 фотографий не более 10МБ каждая, заголовок длиной не более 100 символов, текст длиной не более 16000 символов и 1 локацию
  - пользователь может создавать не более 10 постов в сутки
  - пользователь может создавать комментарий с длиной не более 1000 символов без фотографий
- Сезонность: в новогодние каникулы и летние месяцы активность возрастает на 50%
- Тайминги:
  - создание 1 поста 3 секунды
  - создание реакции 1 секунда
  - создание комментария 1 секунда
  - получение результата поиска по месту 3 секунды
  - получение ленты новостей 2 секунды
  - подписка/отписка на пользователя 1 секунда

### Оценка нагрузки:

#### Нагрузка (по подсистемам):
- Посты:
  - RPS (Write) = 10000000 * (1/7) / 86400 =~ 10000000 * (1/7) / 100000 = 100 * 0,143 = 14
  - RPS (Read) = 10000000 * (5*50 + 3*10) / 86400 =~ 10000000 * 280 / 100000 = 100 * 280 = 28000
- Реакции (Оценки):
  - RPS (Write) = 10000000 * 50 / 86400 =~ 10000000 * 50 / 100000 = 100 * 50 = 5000
  - RPS (Read) = 10000000 * (5*50 + 3*10) / 86400 =~ 10000000 * 280 / 100000 = 100 * 280 = 28000
- Комментарии:
  - RPS (Write) = 10000000 * 20 / 86400 =~ 10000000 * 20 / 100000 = 100 * 20 = 2000
  - RPS (Read) = 10000000 * (5*50*5 + 3*10*5) / 86400 =~ 10000000 * 1400 / 100000 = 100 * 1400 = 140000

#### Размеры по сущностям:
1 пост ~ 120 000 bytes:
- id (8 bytes)
- created_at (8 bytes)
- user_id (8 bytes)
- title (100 bytes)
- text (16000 bytes)
- gps_location (16 bytes)
- photos (100000 bytes)

1 реакция = 32 bytes:
- id (8 bytes)
- created_at (8 bytes)
- user_id (8 bytes)
- reaction_type (8 bytes)

1 комментарий = 1024 bytes:
- id (8 bytes)
- created_at (8 bytes)
- user_id (8 bytes)
- text (1000 bytes)

#### Трафик (по подсистемам):
- Посты:
  - Traffic (Write) = 14 * 120000 = 1680000 bytes = 1.68 MB/s
  - Traffic (Read) = 28000 * 120000 = 3360 MB/s
- Реакции (Оценки):
  - Traffic (Write) = 5000 * 32 = 160000 bytes = 160 KB/s
  - Traffic (Read) = 28000 * 32 = 896 KB/s
- Комментарии:
  - Traffic (Write) = 2000 * 1024 = 2 MB/s
  - Traffic (Read) = 140000 * 1024 = 145 MB/s